<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>
</head>

<body>
  <script type="text/javascript" src="ZiliqaJS.browser.js"></script>
  <script type="text/javascript" src="bn.js"></script>
  <script type="text/javascript" src="long.js"></script>
  <script type="text/javascript">
    const { Zilliqa } = window.ZilliqaJS
    const zjs = new Zilliqa('https://api-scilla.zilliqa.com')

    //sendTransaction('f03ececc92a157aa4c3f26de32069749f7325bac', '12', '69122B6C3A70B6CC7908546B7F6233F1F5501ECC5759D2940E32FEE250E7AA7A');


    function sendTransaction(toaddress, amount, senderPrivateKey) {

      zjs.wallet.addByPrivateKey(
        senderPrivateKey,
      );
      console.log("Preparing to send the transaction...");

      sendTx(toaddress, parseFloat(amount)).then(function (output) {
        console.log(">> output status " + output.status);
        console.log(">> transaction id " + output.id);
        Android.showHash(output.id);
      });
    }

    async function sendTx(toaddress, amount) {
      try {
        // Send a transaction to the network
        console.log(">> to : " + toaddress + " > amount > " + amount);
        const tx = await zjs.blockchain.createTransaction(
          zjs.transactions.new({
            version: 1,
            toAddr: toaddress,
            amount: new BN(amount),
            gasPrice: new BN(100),
            gasLimit: Long.fromNumber(10),
          }),
        );
        return tx;
      } catch (err) {
        Android.showError(err.message)
        console.log(err);
      }
    }
  </script>
</body>

</html>
